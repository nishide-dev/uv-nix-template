# Copier template configuration for uv-nix-template
# This template creates a modern Python library project with uv package management

_min_copier_version: "9.0.0"

# ============================================================================
# User questions - collected when generating a new project
# ============================================================================

project_name:
  type: str
  help: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (ä¾‹: my-awesome-lib)"
  placeholder: "my-awesome-lib"
  validator: "^[a-z][a-z0-9_-]+$"

package_name:
  type: str
  help: "ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (Pythonã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆåã€é€šå¸¸ã¯ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹)"
  default: "{{ project_name | replace('-', '_') }}"
  validator: "^[a-z][a-z0-9_]+$"

description:
  type: str
  help: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®çŸ­ã„èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
  placeholder: "A modern Python library"

author_name:
  type: str
  help: "ä½œè€…åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
  placeholder: "Your Name"

author_email:
  type: str
  help: "ä½œè€…ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
  placeholder: "your.email@example.com"

python_version:
  type: str
  help: "å¯¾è±¡ã¨ã™ã‚‹æœ€å°Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„"
  default: "3.12"
  choices:
    - "3.10"
    - "3.11"
    - "3.12"
    - "3.13"

use_ruff:
  type: bool
  help: "Ruff (é«˜é€Ÿlinter/formatter) ã‚’ä½¿ç”¨ã—ã¾ã™ã‹ï¼Ÿ"
  default: true

use_mypy:
  type: bool
  help: "Mypy (å‹ãƒã‚§ãƒƒã‚«ãƒ¼) ã‚’ä½¿ç”¨ã—ã¾ã™ã‹ï¼Ÿ"
  default: true

use_pytest:
  type: bool
  help: "Pytest (ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯) ã‚’ä½¿ç”¨ã—ã¾ã™ã‹ï¼Ÿ"
  default: true

use_github_actions:
  type: bool
  help: "GitHub Actions CI/CDã‚’è¨­å®šã—ã¾ã™ã‹ï¼Ÿ"
  default: true

use_nix:
  type: bool
  help: "Nix + direnv ã«ã‚ˆã‚‹é–‹ç™ºç’°å¢ƒç®¡ç†ã‚’ä½¿ç”¨ã—ã¾ã™ã‹ï¼Ÿ"
  default: true

# ============================================================================
# File/directory exclusion settings
# ============================================================================

_exclude:
  - "copier.yml"
  - "copier.yaml"
  - ".git"
  - ".venv"
  - "__pycache__"
  - "*.pyc"
  - ".pytest_cache"
  - ".mypy_cache"
  - ".ruff_cache"
  - "uv.lock"  # ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã¯ç”Ÿæˆæ™‚ã«æ–°è¦ä½œæˆ
  - "dist"
  - "build"
  - "*.egg-info"
  - "TEMPLATE_README.md"  # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½¿ç”¨è€…å‘ã‘ã®README (ç”Ÿæˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯å«ã‚ãªã„)
  - ".github/ISSUE_TEMPLATE"  # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªç”¨ã®Issueãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆç”Ÿæˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯å«ã‚ãªã„ï¼‰
  - ".github/pull_request_template.md"  # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªç”¨ã®PRãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆç”Ÿæˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯å«ã‚ãªã„ï¼‰
  - "{% if not use_nix %}flake.nix.jinja{% endif %}"  # Nixæœªä½¿ç”¨ã®å ´åˆã¯é™¤å¤–
  - "{% if not use_nix %}.envrc{% endif %}"  # Nixæœªä½¿ç”¨ã®å ´åˆã¯é™¤å¤–
  - "{% if not use_nix %}docs{% endif %}"  # Nixæœªä½¿ç”¨ã®å ´åˆã¯docsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…¨ä½“ã‚’é™¤å¤–

# ============================================================================
# Post-generation tasks
# ============================================================================

_tasks:
  # Git ãƒªãƒã‚¸ãƒˆãƒªã®åˆæœŸåŒ–
  - "git init"
  - "git add ."

  # uv ã«ã‚ˆã‚‹ç’°å¢ƒæ§‹ç¯‰ã¨ä¾å­˜è§£æ±º
  - "uv venv"
  - "uv lock"
  - "uv sync"

  # åˆæœŸã‚³ãƒŸãƒƒãƒˆ
  - 'git commit -m "chore: initial commit from uv-nix-template"'

  # æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  - |
    echo "
    ============================================================
    ğŸ‰ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã¾ã—ãŸï¼
    ============================================================

    æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:
      1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•:
         cd {{ project_name }}

      2. ä»®æƒ³ç’°å¢ƒã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆ:
         source .venv/bin/activate  # Linux/macOS

      3. é–‹ç™ºã‚’é–‹å§‹:
         uv add <package-name>      # ä¾å­˜é–¢ä¿‚ã®è¿½åŠ 
         uv run pytest              # ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
         uv run ruff format .       # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

      4. (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) CUDA/Nixç’°å¢ƒãŒå¿…è¦ãªå ´åˆ:
         copier copy gh:your-org/uv-cuda-nix-template .

    ============================================================
    "

# ============================================================================
# Template metadata
# ============================================================================

_metadata:
  template_version: "0.1.0"
  min_uv_version: "0.4.0"
